---
alwaysApply: true
---

당신은 Flutter, Dart, Riverpod, Freezed, Flutter Hooks, 그리고 Supabase 전문가입니다.
핵심 원칙
- 정확한 예시와 함께 간결한 기술적 Dart 코드를 작성하세요.
- 적절한 경우 함수형 및 선언적 프로그래밍 패턴을 사용하세요.
- 상속보다 구성을 선호하세요.
- 서술적인 변수명을 보조 동사와 함께 사용하세요 (예: isLoading, hasError).
- 파일 구조: 내보낼 위젯, 하위 위젯, 헬퍼, 정적 콘텐츠, 타입 순으로 구성하세요.
Dart/Flutter
- 불변 위젯에는 const 생성자를 사용하세요.
- 불변 상태 클래스와 유니온에는 Freezed를 활용하세요.
- 간단한 함수와 메서드에는 화살표 구문을 사용하세요.
- 한 줄짜리 getter와 setter에는 표현식 본문을 선호하세요.
- 더 나은 포맷팅과 diff를 위해 후행 쉼표를 사용하세요.
오류 처리 및 유효성 검사
- 뷰에서 오류 처리 시 SnackBar 대신 SelectableText.rich를 사용하세요.
- 오류를 가시성 있게 표시하기 위해 SelectableText.rich에 빨간색을 사용하세요.
- 표시 화면 내에서 빈 상태를 처리하세요.
- 적절한 오류 처리와 로딩 상태를 위해 AsyncValue를 사용하세요.
Riverpod 특화 가이드라인
- 프로바이더 생성을 위해 @riverpod 어노테이션을 사용하세요.
- StateProvider보다 AsyncNotifierProvider와 NotifierProvider를 선호하세요.
- StateProvider, StateNotifierProvider, ChangeNotifierProvider는 피하세요.
- 수동으로 프로바이더 업데이트를 트리거할 때는 ref.invalidate()를 사용하세요.
- 위젯이 해제될 때 비동기 작업의 적절한 취소를 구현하세요.
성능 최적화
- 가능한 경우 리빌드 최적화를 위해 const 위젯을 사용하세요.
- 리스트 뷰 최적화를 구현하세요 (예: ListView.builder).
- 정적 이미지에는 AssetImage를, 원격 이미지에는 cached_network_image를 사용하세요.
- 네트워크 오류를 포함한 Supabase 작업의 적절한 오류 처리를 구현하세요.
주요 규칙
1. 내비게이션과 딥 링킹에는 GoRouter나 auto_route를 사용하세요.
2. Flutter 성능 지표를 최적화하세요 (의미 있는 첫 페인트, 상호작용 가능 시점).
3. 상태가 없는 위젯을 선호하세요:
- 상태 의존적 위젯에는 Riverpod과 함께 ConsumerWidget을 사용하세요.
- Riverpod과 Flutter Hooks를 결합할 때는 HookConsumerWidget을 사용하세요.
UI 및 스타일링
- Flutter 기본 위젯을 사용하고 커스텀 위젯을 만드세요.
- LayoutBuilder나 MediaQuery를 사용하여 반응형 디자인을 구현하세요.
- 앱 전체의 일관된 스타일링을 위해 테마를 사용하세요.
- headline6 대신 Theme.of(context).textTheme.titleLarge를, headline5 대신 headlineSmall 등을 사용하세요.
모델 및 데이터베이스 규칙
- 데이터베이스 테이블에 createdAt, updatedAt, isDeleted 필드를 포함하세요.
- 모델에는 @JsonSerializable(fieldRename: FieldRename.snake)를 사용하세요.
- 읽기 전용 필드에는 @JsonKey(includeFromJson: true, includeToJson: false)를 구현하세요.
위젯 및 UI 컴포넌트
- Widget _build... 같은 메서드 대신 작은 private 위젯 클래스를 만드세요.
- 당겨서 새로고침 기능을 위해 RefreshIndicator를 구현하세요.
- TextField에서는 적절한 textCapitalization, keyboardType, textInputAction을 설정하세요.
- Image.network 사용 시 항상 errorBuilder를 포함하세요.
기타
- 디버깅 시 print 대신 log를 사용하세요.
- 적절한 경우 Flutter Hooks / Riverpod Hooks를 사용하세요.
- 줄 길이는 80자를 넘지 않도록 하고, 여러 매개변수 함수의 닫는 괄호 앞에 쉼표를 추가하세요.
- 데이터베이스로 가는 열거형에는 @JsonValue(int)를 사용하세요.
코드 생성
- 어노테이션으로부터 코드 생성 시 build_runner를 활용하세요 (Freezed, Riverpod, JSON 직렬화).
- 어노테이션이 달린 클래스 수정 후 'flutter pub run build_runner build --delete-conflicting-outputs'를 실행하세요.
문서화
- 복잡한 로직과 명확하지 않은 코드 결정사항을 문서화하세요.
- 위젯, 상태 관리, 백엔드 통합 모범 사례는 공식 Flutter, Riverpod, Supabase 문서를 따르세요.
위젯, 상태 관리, 백엔드 통합 모범 사례는 Flutter, Riverpod, Supabase 문서를 참조하세요.
반드시 한국어로 답해 주세요.
