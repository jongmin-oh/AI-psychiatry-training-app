# Product Requirements Document (PRD)
## AI Psychiatry Training App

---

## 1. 문서 정보

| 항목 | 내용 |
|------|------|
| **프로젝트명** | AI Psychiatry Training App |
| **버전** | 1.0 |
| **작성일** | 2026-02-03 |
| **문서 유형** | Product Requirements Document |

---

## 2. 프로젝트 개요

### 2.1 목적
학교 Peer Counseling(또래 상담) 인력을 전문화하여 학생들의 정신건강 지원력을 강화하는 AI 기반 상담 트레이닝 애플리케이션 개발

### 2.2 배경 및 문제점
- **현황**: 현대 국제학교 학생들 사이에서 스트레스와 불안이 증가
- **문제점**:
  - 또래 상담원이 "무엇을 질문해야 하는지" 판단하기 어려움
  - 체계적인 연습 환경 부족
  - 대화 흐름을 놓치는 경우가 다수 발생
  - 기존 또래 상담 시스템의 훈련 일관성 부족

### 2.3 솔루션
AI 시뮬레이션을 통해 실제 상담 상황을 연습할 수 있는 트레이닝 환경을 제공하여:
- 상담 스킬 기준화
- 질문 선택의 모호함 해소
- 대화 방향성 확립 지원

---

## 3. 타겟 사용자

### 3.1 Primary User
- **대상**: 학교 Peer Counseling(또래 상담) 학생들
- **연령대**: 중고등학생 (추정 14-18세)
- **환경**: 국제학교 중심

### 3.2 사용자 페르소나

#### 페르소나 1: 신입 또래 상담원
- **이름**: 지수 (고1)
- **특징**: 또래 상담에 관심이 많지만 실전 경험 부족
- **Pain Points**:
  - 실제 상담 상황에서 무엇을 말해야 할지 모르겠음
  - 친구가 고민을 털어놓을 때 적절히 반응하지 못함
- **니즈**: 실수해도 괜찮은 안전한 연습 환경

#### 페르소나 2: 경험 있는 상담원
- **이름**: 민준 (고2)
- **특징**: 6개월 이상 또래 상담 활동 중
- **Pain Points**:
  - 특정 유형의 고민(예: 심각한 우울, 가족 문제) 대응 어려움
  - 자신의 상담 실력이 향상되고 있는지 확인하고 싶음
- **니즈**: 다양한 시나리오 연습과 객관적인 피드백

---

## 4. 제품 목표

### 4.1 비즈니스 목표
1. 또래 상담원의 상담 전문성 향상
2. 학생 정신건강 지원 시스템 강화
3. 표준화된 상담 훈련 프로그램 제공

### 4.2 사용자 목표
1. 실전 같은 상담 연습을 통한 자신감 획득
2. 다양한 상황별 대응 능력 향상
3. 자신의 상담 역량 개선 추이 확인

### 4.3 성공 지표 (KPI)
- **정량적 지표**:
  - 사용자당 월평균 시뮬레이션 완료 횟수
  - 시나리오별 평균 점수 개선율
  - 앱 사용 후 상담 만족도 증가율
- **정성적 지표**:
  - 사용자 피드백 (앱이 실제 상담에 도움이 되었는가)
  - 상담원의 자신감 수준 변화

---

## 5. MVP 범위

### 5.1 포함 기능

1. **AI 대화 시뮬레이션**
   - Gemini API를 활용한 실시간 대화
   - 자유 입력 방식의 채팅 인터페이스
   - 시나리오 기반 대화 진행

2. **시나리오 관리**
   - 미리 작성된 시나리오 리스트
   - 시나리오 선택 및 시작

3. **기본 피드백 시스템**
   - 대화 종료 후 AI 피드백 제공
   - 평가 점수 및 개선 제안

4. **진행도 표시**
   - 완료한 시나리오 수
   - 최근 훈련 기록

### 5.2 제외 사항 (Out of Scope)
- 사용자 인증 시스템 (로그인/회원가입)
- 소셜 기능 (다른 상담원과 공유/비교)
- 객관식 질문 선택 옵션
- 상세 분석 대시보드
- 감정 톤 분석
- 상담 팁 가이드북
- 힌트 시스템
- 오프라인 모드
- 음성 대화 기능

---

## 6. 기능 명세 (Functional Requirements)

### 6.1 메인 화면

#### 6.1.1 시나리오 리스트
**기능 설명**:
- 사용자가 훈련할 시나리오를 선택할 수 있는 카드 형식의 리스트 제공

**상세 요구사항**:
- 각 시나리오 카드는 다음 정보를 포함:
  - 시나리오 제목 (예: "시험 불안", "친구 관계 고민", "가족 갈등")
  - 난이도 표시 (초급/중급/고급)
  - 예상 소요 시간 (예: 10-15분)
  - 완료 여부 표시
  - 간단한 설명 (1-2줄)

**UI/UX 요구사항**:
- 스크롤 가능한 카드 리스트
- 미완료 시나리오 우선 표시
- 카드 터치 시 시나리오 상세 정보 표시

**데이터 구조**:
```json
{
  "scenario_id": "string",
  "title": "string",
  "description": "string",
  "difficulty": "beginner|intermediate|advanced",
  "estimated_time": "number (minutes)",
  "category": "string",
  "is_completed": "boolean"
}
```

#### 6.1.2 간단한 진행도 표시
**기능 설명**:
- 사용자의 전체 훈련 진행 상황을 한눈에 보여주는 요약 정보

**상세 요구사항**:
- 완료한 시나리오 수 / 전체 시나리오 수
- 진행률 프로그레스 바
- 최근 훈련 날짜

---

### 6.2 시나리오 시작 화면

#### 6.2.1 시나리오 소개
**기능 설명**:
- 선택한 시나리오의 배경 정보와 학습 목표 제시

**상세 요구사항**:
- 시나리오 배경 설명
- 이번 훈련에서 집중할 포인트
- "훈련 시작" 버튼

**예시**:
```
시나리오: 시험 불안

배경:
고3 학생이 대입 시험을 앞두고 극심한 불안감을 호소하고 있습니다.
밤에 잠을 제대로 자지 못하고, 집중력이 떨어진다고 합니다.

학습 목표:
- 학생의 감정을 공감하며 들어주기
- 불안의 구체적인 원인 파악하기
- 실질적인 대처 방법 제안하기

[훈련 시작]
```

---

### 6.3 AI 대화 시뮬레이션 화면 (핵심)

#### 6.3.1 채팅 인터페이스
**기능 설명**:
- 실제 메신저 앱과 유사한 대화 인터페이스에서 AI 학생과 실시간 대화

**상세 요구사항**:
- **메시지 표시**:
  - AI 학생 메시지: 왼쪽 정렬, 고유 색상
  - 상담원(사용자) 메시지: 오른쪽 정렬
  - 타임스탬프 표시 (선택 사항)

- **입력 방식**:
  - 자유 텍스트 입력

- **실시간 피드백**:
  - 사용자가 메시지를 보낼 때마다 AI가 실시간 응답
  - AI의 감정 상태 변화 표시 (예: 아이콘, 색상)

**Gemini API 통합**:
- **시스템 프롬프트 구조**:
```
당신은 [시나리오명]으로 고민하는 고등학생입니다.
배경: [시나리오 배경 정보]
감정 상태: [초기 감정 상태]
성격: [캐릭터 성격 설정]

상담원의 질문에 자연스럽게 반응하며, 점차 마음을 열어가세요.
너무 쉽게 문제가 해결되지 않도록 현실적으로 반응하세요.
```

- **대화 흐름 관리**:
  - 대화 히스토리를 유지하여 맥락 있는 응답 생성
  - 상담원의 공감 수준에 따라 AI 학생의 개방 정도 조절

**UI/UX 요구사항**:
- 키보드가 올라올 때 채팅창 자동 스크롤
- 메시지 전송 중 로딩 인디케이터
- 긴 메시지는 스크롤 가능하게 표시

#### 6.3.2 대화 종료
**기능 설명**:
- 사용자가 대화를 종료하고 피드백을 받을 수 있는 기능

**상세 요구사항**:
- "대화 종료" 버튼
- 종료 시 확인 다이얼로그
- 자동 저장 (로컬 저장소)

---

### 6.4 피드백 및 평가 화면

#### 6.4.1 대화 요약
**기능 설명**:
- 방금 진행한 대화의 주요 내용 요약

**상세 요구사항**:
- 전체 대화 메시지 수
- 대화 소요 시간
- 주요 키워드 추출

#### 6.4.2 AI 피드백
**기능 설명**:
- Gemini API를 활용하여 상담원의 대화 내용을 분석하고 피드백 제공

**상세 요구사항**:
- **평가 항목**:
  - 공감 표현 수준
  - 경청 능력 (적절한 질문 사용)
  - 해결책 제안의 적절성
  - 전반적인 대화 흐름

- **피드백 형식**:
```
잘한 점:
- 학생의 감정을 잘 공감해주었습니다.
- "많이 힘들겠구나"와 같은 표현으로 학생이 안심할 수 있었습니다.

개선할 점:
- 해결책을 제시하기 전에 학생의 이야기를 더 들어주면 좋겠습니다.
- "왜 그렇게 생각해?"보다는 "그렇게 느낀 이유가 있을까?"와 같이 부드러운 표현을 사용해보세요.

추천 학습:
- 경청 스킬 향상을 위한 "적극적 경청" 시나리오를 추천합니다.
```

**Gemini API 활용**:
```
전체 대화 내역을 분석하고, 다음 기준으로 평가해주세요:
1. 공감 표현 (1-5점)
2. 경청 능력 (1-5점)
3. 질문의 적절성 (1-5점)
4. 해결책 제안 (1-5점)

각 항목별 점수와 함께 구체적인 피드백을 제공해주세요.
```

#### 6.4.3 재시도 및 다음 단계
**상세 요구사항**:
- "다시 시도" 버튼 (같은 시나리오 재시도)
- "다음 시나리오" 버튼
- "메인으로" 버튼

---

### 6.5 히스토리 화면

#### 6.5.1 과거 대화 기록
**기능 설명**:
- 지금까지 완료한 시뮬레이션 목록 확인

**상세 요구사항**:
- 날짜별 시뮬레이션 리스트
- 각 항목 클릭 시 대화 내용 및 피드백 다시 보기
- 필터링 (카테고리별, 날짜별)

---

## 7. 비기능 요구사항 (Non-Functional Requirements)

### 7.1 성능
- **응답 속도**:
  - AI 응답 시간 < 3초 (Gemini API 호출 기준)
  - 화면 전환 < 500ms

- **데이터 로딩**:
  - 시나리오 리스트 로딩 < 1초

### 7.2 확장성
- 시나리오 추가가 용이한 데이터 구조
- JSON 파일 기반 시나리오 관리

### 7.3 보안 및 프라이버시
- **데이터 저장**:
  - 로컬 저장소 사용 (Shared Preferences / Hive)
  - 사용자 기기에만 데이터 저장

- **API 키 관리**:
  - Gemini API 키는 환경 변수로 관리
  - 프론트엔드에 하드코딩 금지

### 7.4 사용성 (Usability)
- **직관적인 UI**:
  - 중고등학생도 쉽게 사용할 수 있는 인터페이스
  - 최소한의 클릭으로 훈련 시작 가능

- **접근성**:
  - 적절한 폰트 크기 (최소 14sp)
  - 명확한 색상 대비

### 7.5 호환성
- **플랫폼**: Android / iOS (Flutter)
- **최소 OS 버전**:
  - Android 6.0 (API 23) 이상
  - iOS 12.0 이상

### 7.6 안정성
- **오류 처리**:
  - API 호출 실패 시 사용자 친화적 오류 메시지
  - 네트워크 끊김 시 재시도 메커니즘

- **데이터 백업**:
  - 대화 중 앱이 종료되어도 자동 저장

---

## 8. 데이터 모델

### 8.1 Scenario (시나리오)
```dart
class Scenario {
  String id;
  String title;
  String description;
  String difficulty; // 'beginner', 'intermediate', 'advanced'
  int estimatedTime; // minutes
  String category; // '시험 불안', '친구 관계', '가족 갈등' 등
  String background; // 시나리오 배경 설명
  String learningGoals; // 학습 목표
  String systemPrompt; // Gemini API용 시스템 프롬프트
  Map<String, dynamic> characterProfile; // AI 캐릭터 프로필
}
```

### 8.2 ChatMessage (대화 메시지)
```dart
class ChatMessage {
  String id;
  String sessionId; // 세션 ID
  String sender; // 'user' or 'ai'
  String content;
  DateTime timestamp;
}
```

### 8.3 TrainingSession (훈련 세션)
```dart
class TrainingSession {
  String id;
  String scenarioId;
  DateTime startTime;
  DateTime? endTime;
  List<ChatMessage> messages;
  bool isCompleted;
  Feedback? feedback;
}
```

### 8.4 Feedback (피드백)
```dart
class Feedback {
  String id;
  String sessionId;
  Map<String, int> scores; // {'empathy': 4, 'listening': 5, ...}
  String goodPoints; // 잘한 점
  String improvements; // 개선할 점
  List<String> recommendedScenarios; // 추천 시나리오 ID 리스트
  DateTime createdAt;
}
```

---

## 9. API 명세

### 9.1 Gemini API 통합

#### 9.1.1 대화 생성 (Chat Completion)
**목적**: AI 학생의 응답 생성

**요청**:
```dart
POST https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent

{
  "contents": [
    {
      "role": "user",
      "parts": [{"text": "[시스템 프롬프트]\n\n[대화 히스토리]\n\n상담원: [사용자 입력]"}]
    }
  ],
  "generationConfig": {
    "temperature": 0.9,
    "topK": 40,
    "topP": 0.95,
    "maxOutputTokens": 1024
  }
}
```

**응답**:
```json
{
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "AI 학생의 응답"
          }
        ]
      }
    }
  ]
}
```

#### 9.1.2 피드백 생성
**목적**: 전체 대화 분석 및 피드백 제공

**요청**:
```dart
POST https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent

{
  "contents": [
    {
      "role": "user",
      "parts": [{
        "text": "다음 상담 대화를 분석하고 피드백을 제공해주세요:\n\n[전체 대화 내역]\n\n평가 기준:\n1. 공감 표현 (1-5점)\n2. 경청 능력 (1-5점)\n3. 질문의 적절성 (1-5점)\n4. 해결책 제안 (1-5점)\n\n출력 형식: JSON"
      }]
    }
  ]
}
```

**응답 파싱**:
```json
{
  "scores": {
    "empathy": 4,
    "listening": 5,
    "questioning": 3,
    "solution": 4
  },
  "goodPoints": "...",
  "improvements": "...",
  "recommendedScenarios": ["scenario_id_1", "scenario_id_2"]
}
```

---

## 10. 기술 스택 상세

### 10.1 Frontend (Flutter)
| 구성 요소 | 기술/라이브러리 | 용도 |
|----------|--------------|------|
| **Framework** | Flutter 3.x | 크로스 플랫폼 앱 개발 |
| **State Management** | Riverpod | 상태 관리 |
| **HTTP Client** | dio | API 호출 |
| **Local Storage** | shared_preferences / hive | 로컬 데이터 저장 |
| **Routing** | go_router | 화면 네비게이션 |
| **UI Components** | Material Design 3 | UI 디자인 시스템 |

### 10.2 Backend
| 구성 요소 | 기술 | 용도 |
|----------|------|------|
| **AI** | Google Gemini API | 대화 생성, 피드백 분석 |

### 10.3 개발 도구
- **버전 관리**: Git / GitHub
- **디자인 툴**: Figma (선택 사항)
- **API 테스트**: Postman / REST Client

---

## 11. 화면 설계 (Wireframe)

### 11.1 메인 화면
```
┌──────────────────────────────────┐
│  AI 상담 트레이닝              [프로필] │
├──────────────────────────────────┤
│                                  │
│  📊 나의 진행도                    │
│  ▓▓▓▓▓▓░░░░ 60%                 │
│  완료: 6/10 시나리오               │
│                                  │
├──────────────────────────────────┤
│  시나리오 선택                     │
│                                  │
│  ┌──────────────────────────┐  │
│  │ 시험 불안              [초급] │  │
│  │ 대입을 앞둔 학생의 극심한...  │  │
│  │ ⏱ 10-15분            ✓완료 │  │
│  └──────────────────────────┘  │
│                                  │
│  ┌──────────────────────────┐  │
│  │ 친구 관계 고민         [중급] │  │
│  │ 친한 친구와 갈등이 생긴...    │  │
│  │ ⏱ 15-20분                  │  │
│  └──────────────────────────┘  │
│                                  │
│  ┌──────────────────────────┐  │
│  │ 가족 갈등              [고급] │  │
│  │ 부모님과의 진로 갈등...       │  │
│  │ ⏱ 20-25분                  │  │
│  └──────────────────────────┘  │
│                                  │
└──────────────────────────────────┘
```

### 11.2 대화 화면
```
┌──────────────────────────────────┐
│ ← 시험 불안 시나리오          [종료] │
├──────────────────────────────────┤
│                                  │
│  ┌─────────────────────┐        │
│  │ 안녕... 요즘 너무 힘들어 │        │
│  └─────────────────────┘        │
│  AI 학생 • 10:23                 │
│                                  │
│                    ┌──────────┐ │
│                    │ 무슨 일이  │ │
│                    │ 있었어?   │ │
│                    └──────────┘ │
│                    나 • 10:24    │
│                                  │
│  ┌─────────────────────┐        │
│  │ 다음 주에 시험인데     │        │
│  │ 공부가 하나도 안 돼...  │        │
│  └─────────────────────┘        │
│  AI 학생 • 10:24                 │
│                                  │
├──────────────────────────────────┤
│  메시지를 입력하세요...     [전송]    │
└──────────────────────────────────┘
```

### 11.3 피드백 화면
```
┌──────────────────────────────────┐
│  훈련 완료!                   [닫기] │
├──────────────────────────────────┤
│                                  │
│  📈 평가 결과                      │
│                                  │
│  공감 표현      ⭐⭐⭐⭐⭐         │
│  경청 능력      ⭐⭐⭐⭐☆         │
│  질문 적절성    ⭐⭐⭐☆☆         │
│  해결책 제안    ⭐⭐⭐⭐☆         │
│                                  │
├──────────────────────────────────┤
│  잘한 점                           │
│  • 학생의 감정을 잘 공감해주었어요   │
│  • "많이 힘들겠구나" 등 따뜻한 표현  │
│                                  │
│  개선할 점                         │
│  • 해결책을 제시하기 전에 이야기를   │
│    더 들어주면 좋겠어요             │
│  • 질문을 조금 더 부드럽게 해보세요  │
│                                  │
├──────────────────────────────────┤
│  추천 시나리오: 적극적 경청 훈련     │
│                                  │
│  [다시 시도]  [다음 시나리오]        │
│                                  │
└──────────────────────────────────┘
```

---

## 12. 사용자 플로우

### 12.1 Main Flow
```
[앱 실행]
    ↓
[메인 화면 - 시나리오 리스트]
    ↓
[시나리오 선택]
    ↓
[시나리오 소개 화면]
    ↓
[훈련 시작 버튼 클릭]
    ↓
[AI 대화 시뮬레이션 화면]
    ↓ (대화 진행)
    ↓
[대화 종료 버튼 클릭]
    ↓
[피드백 화면]
    ↓
[메인으로 / 다시 시도 / 다음 시나리오]
```

### 12.2 Alternative Flows

#### Flow A: 대화 중단
```
[대화 중]
    ↓
[종료 버튼 클릭]
    ↓
[확인 다이얼로그: "대화를 종료하시겠습니까?"]
    ↓ (예)
[자동 저장 후 메인 화면]
```

---

## 13. 시나리오 예시

### 13.1 시나리오 1: 시험 불안

**메타 정보**:
- ID: scenario_001
- 제목: 시험 불안
- 난이도: 초급
- 예상 시간: 10-15분
- 카테고리: 학업 스트레스

**배경**:
고3 학생 수진이는 대입 시험을 2주 앞두고 극심한 불안감을 호소하고 있습니다. 최근 밤에 잠을 제대로 자지 못하고, 공부를 해도 집중이 안 된다고 합니다. 성적은 중상위권이지만, 시험 결과가 나쁠 것 같은 불안감에 시달리고 있습니다.

**학습 목표**:
- 학생의 불안 감정에 공감하기
- 불안의 구체적인 원인 파악하기
- 실질적인 불안 관리 방법 제안하기
- 과도한 조언이나 해결책 강요 피하기

**AI 캐릭터 프로필**:
- 이름: 수진
- 나이: 18세 (고3)
- 성격: 성실하고 책임감 강함, 완벽주의 성향
- 초기 감정 상태: 불안 80%, 피로 60%, 자신감 20%
- 대화 스타일: 처음에는 조금 방어적, 공감받으면 점차 마음을 열음

**시스템 프롬프트**:
```
당신은 고3 학생 '수진'입니다. 대입 시험을 2주 앞두고 극심한 불안감을 느끼고 있습니다.

배경 상황:
- 평소 성적은 중상위권
- 최근 일주일간 하루 4-5시간만 수면
- 공부할 때 집중이 안 됨
- "내가 실패하면 어떡하지"라는 생각이 반복됨

성격:
- 성실하고 책임감이 강함
- 완벽을 추구하는 경향
- 처음에는 쉽게 마음을 열지 않음

대화 방식:
- 처음에는 "괜찮다", "그냥 그렇다" 같은 짧은 대답
- 상담원이 진심으로 공감해주면 점차 구체적으로 이야기
- 조언을 강요하면 방어적으로 변함
- 경청과 공감에는 긍정적으로 반응

절대 하지 말 것:
- 너무 쉽게 "이해했어요", "이제 괜찮아요" 라고 말하지 마세요
- 문제가 빠르게 해결되지 않습니다
- 상담원의 태도에 따라 반응이 달라져야 합니다

당신의 목표는 현실적인 고민을 가진 학생을 연기하는 것입니다.
```

**예상 대화 흐름**:
1. **Opening**: AI 학생이 고민을 꺼냄
   - "요즘 너무 힘들어... 시험이 다가오는데 공부가 하나도 안 돼"

2. **탐색**: 상담원이 상황을 파악
   - (좋은 예) "많이 힘들겠구나. 어떤 부분이 가장 힘들어?"
   - (나쁜 예) "공부 시간을 늘려봐" (너무 빠른 해결책)

3. **공감**: 감정을 인정하고 공감
   - (좋은 예) "시험 앞두고 그런 불안감 느끼는 거 정말 힘들지"

4. **심화**: 구체적인 원인 탐색
   - (좋은 예) "그 불안감이 언제 가장 심해?"

5. **지지 및 제안**: 실질적인 도움 제공
   - (좋은 예) "짧은 휴식 시간을 가지는 건 어떨까? 10분만이라도"

---

### 13.2 시나리오 2: 친구 관계 고민

**메타 정보**:
- ID: scenario_002
- 제목: 친구 관계 고민
- 난이도: 중급
- 예상 시간: 15-20분
- 카테고리: 대인관계

**배경**:
중2 학생 민수는 가장 친한 친구와 최근 갈등이 생겼습니다. 친구가 다른 친구들과 어울리기 시작하면서 자신을 소외시키는 것 같다고 느낍니다. 먼저 말을 걸어야 할지, 아니면 거리를 둬야 할지 고민하고 있습니다.

**학습 목표**:
- 학생의 외로움과 배신감에 공감하기
- 상황을 객관적으로 파악하도록 돕기
- 성급한 판단을 피하고 여러 관점 제시하기
- 학생 스스로 결정할 수 있도록 지원하기

---

### 13.3 추가 시나리오 아이디어

| ID | 제목 | 난이도 | 카테고리 |
|----|------|--------|---------|
| scenario_003 | 가족 갈등 (진로 문제) | 고급 | 가족 |
| scenario_004 | SNS 스트레스 | 초급 | 디지털 웰빙 |
| scenario_005 | 따돌림 피해 | 고급 | 학교 폭력 |
| scenario_006 | 자존감 저하 | 중급 | 심리 |
| scenario_007 | 진로 고민 | 중급 | 진로 |
| scenario_008 | 연애 고민 | 중급 | 대인관계 |

---

## 14. 디자인 가이드라인

### 14.1 컬러 팔레트

#### Primary Colors
- **Primary Blue**: #2196F3 (신뢰감, 차분함)
- **Primary Dark**: #1976D2
- **Primary Light**: #BBDEFB

#### Secondary Colors
- **Accent**: #FF9800 (강조, CTA 버튼)
- **Background**: #FAFAFA (밝은 회색)
- **Surface**: #FFFFFF

#### Semantic Colors
- **Success**: #4CAF50 (완료, 긍정 피드백)
- **Warning**: #FFC107 (주의, 힌트)
- **Error**: #F44336 (오류)
- **Info**: #2196F3

#### Text Colors
- **Primary Text**: #212121
- **Secondary Text**: #757575
- **Hint Text**: #BDBDBD

### 14.2 타이포그래피

| 요소 | 폰트 크기 | 폰트 무게 | 용도 |
|------|---------|---------|------|
| Headline 1 | 24sp | Bold | 화면 제목 |
| Headline 2 | 20sp | Semibold | 섹션 제목 |
| Body 1 | 16sp | Regular | 본문 텍스트 |
| Body 2 | 14sp | Regular | 부가 설명 |
| Caption | 12sp | Regular | 작은 설명, 타임스탬프 |
| Button | 16sp | Medium | 버튼 텍스트 |

**권장 폰트**:
- 한글: Noto Sans KR / Pretendard
- 영문/숫자: Roboto

### 14.3 컴포넌트 스타일

#### 버튼
- **Primary Button**:
  - 배경: Primary Blue (#2196F3)
  - 텍스트: White
  - 높이: 48dp
  - 모서리: 8dp radius

- **Secondary Button**:
  - 배경: 투명
  - 테두리: Primary Blue 1dp
  - 텍스트: Primary Blue

#### 카드
- 배경: White
- Shadow: elevation 2dp
- 모서리: 12dp radius
- Padding: 16dp

#### 입력 필드
- 높이: 56dp
- 테두리: 1dp, #E0E0E0
- Focus 시: Primary Blue
- 모서리: 8dp radius

### 14.4 레이아웃 규칙
- **Grid System**: 8dp grid
- **Spacing**:
  - Small: 8dp
  - Medium: 16dp
  - Large: 24dp
- **Screen Padding**: 좌우 16dp

---

## 15. 개발 일정 (예상)

### MVP 개발 (4-6주)

#### Week 1-2: 기본 구조 및 UI
- [ ] Flutter 프로젝트 세팅
- [ ] Riverpod 상태 관리 구조 설정
- [ ] 메인 화면 UI 구현
- [ ] 시나리오 리스트 UI
- [ ] 기본 라우팅 설정

#### Week 3-4: AI 대화 기능
- [ ] Gemini API 통합
- [ ] 채팅 UI 구현
- [ ] 실시간 대화 로직 구현
- [ ] 대화 저장 기능 (로컬)
- [ ] 시나리오 데이터 구조 및 샘플 데이터 작성

#### Week 5: 피드백 시스템 및 히스토리
- [ ] 피드백 생성 로직
- [ ] 피드백 화면 UI
- [ ] 점수 계산 및 표시
- [ ] 히스토리 화면 구현

#### Week 6: 테스트 및 버그 수정
- [ ] 전체 플로우 테스트
- [ ] 버그 수정
- [ ] UI/UX 개선

---

## 16. 리스크 및 대응 방안

### 16.1 기술적 리스크

| 리스크 | 발생 가능성 | 영향도 | 대응 방안 |
|--------|----------|--------|---------|
| Gemini API 응답 지연 | 중간 | 높음 | 로딩 인디케이터, 타임아웃 설정, 재시도 로직 |
| API 비용 초과 | 낮음 | 중간 | 사용량 모니터링, 요청 캐싱, 무료 할당량 관리 |
| 대화 품질 저하 | 중간 | 높음 | 프롬프트 엔지니어링 개선, 테스트 시나리오 검증 |
| 로컬 저장소 한계 | 낮음 | 낮음 | 정기적인 데이터 정리, 저장 용량 모니터링 |

### 16.2 사용자 경험 리스크

| 리스크 | 발생 가능성 | 영향도 | 대응 방안 |
|--------|----------|--------|---------|
| AI 응답이 부적절함 | 중간 | 높음 | 시스템 프롬프트 개선, 필터링 로직, 윤리 가이드라인 적용 |
| 사용자가 앱을 어려워함 | 낮음 | 중간 | 직관적인 UI 설계, 명확한 안내 메시지 |
| 피드백이 모호함 | 중간 | 중간 | 피드백 프롬프트 개선, 구체적인 예시 제공 |

---

## 17. 성공 지표 (Success Metrics)

### 17.1 정량적 지표 (Quantitative)

| 지표 | 목표 (3개월 후) | 측정 방법 |
|------|--------------|---------|
| 월 활성 사용자 (MAU) | 100+ | 앱 실행 횟수 |
| 사용자당 평균 시뮬레이션 완료 수 | 5+ | 세션 완료 데이터 |
| 시뮬레이션 완료율 | 70%+ | 시작 세션 / 완료 세션 |
| 평균 세션 길이 | 12분+ | 시작-종료 시간 차이 |
| 재사용률 (7일 이내 재방문) | 60%+ | 사용자 활동 로그 |

### 17.2 정성적 지표 (Qualitative)

- 사용자 만족도 설문 (5점 만점): 4.0+
- "실제 상담에 도움이 되었나요?" (Yes/No): 80% Yes
- 사용자 피드백 수집 및 분석

---

## 18. 참고 자료

### 18.1 기술 문서
- [Flutter 공식 문서](https://flutter.dev/docs)
- [Riverpod 가이드](https://riverpod.dev/)
- [Gemini API 문서](https://ai.google.dev/docs)

### 18.2 디자인 레퍼런스
- Material Design 3 Guidelines
- 전문적인 학습 앱 UI 사례
- 채팅 인터페이스 베스트 프랙티스

### 18.3 도메인 지식
- 또래 상담 매뉴얼
- 청소년 심리상담 가이드
- 공감적 경청 기법

---

## 19. 용어 정의

| 용어 | 설명 |
|------|------|
| **또래 상담** | 같은 또래 학생들이 서로의 고민을 듣고 지원하는 활동 |
| **시뮬레이션** | AI를 통해 실제 상담 상황을 연습하는 것 |
| **시나리오** | 특정 고민 상황을 설정한 훈련 프로그램 단위 |
| **세션** | 하나의 시뮬레이션 대화 (시작부터 종료까지) |
| **피드백** | AI가 제공하는 상담 평가 및 개선 제안 |
| **공감적 경청** | 상대방의 감정을 이해하고 수용하며 듣는 상담 기법 |

---

## 20. FAQ

### Q1: Gemini API 비용은 어떻게 되나요?
- Gemini API는 무료 tier가 있으며, 일정 사용량까지는 무료로 사용 가능합니다.
- 초기 MVP에서는 무료 할당량 내에서 충분히 운영 가능합니다.

### Q2: 로그인 없이 어떻게 데이터를 저장하나요?
- 기기 로컬 저장소(Shared Preferences, Hive)를 사용합니다.
- 앱 삭제 시 데이터가 사라질 수 있습니다.
- 사용자 개인정보는 수집하지 않습니다.

### Q3: AI 응답이 부적절할 경우 어떻게 하나요?
- 시스템 프롬프트에 윤리적 가이드라인 포함
- 민감한 키워드 필터링
- 상담 윤리 규정 준수

### Q4: 실제 상담원 자격증과 연계되나요?
- 현재는 비공식 트레이닝 도구입니다.
- 학교 또래 상담 프로그램의 보조 도구로 활용 가능합니다.

---

## 21. 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|---------|--------|
| 1.0 | 2026-02-03 | 초안 작성 | Claude |

---

## 22. 승인

| 역할 | 이름 | 승인 일자 | 서명 |
|------|------|---------|------|
| Product Owner | - | - | - |
| Tech Lead | - | - | - |
| Designer | - | - | - |

---

**문서 끝**
